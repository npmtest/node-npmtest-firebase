<!doctype html>
<html lang="en">
<head>
    <title>Code coverage report for node-npmtest-firebase/node_modules/firebase/firebase-messaging.js</title>
    <meta charset="utf-8">
    <style>
        body, html {
            margin:0; padding: 0;
        }
        body {
            font-family: Arial, Helvetica;
            font-size: 10pt;
        }
        div.header, div.footer {
            background: #eee;
            padding: 1em;
        }
        div.header {
            height: 160px;
            padding: 0 1em 0 1em;
            z-index: 100;
            position: fixed;
            top: 0;
            border-bottom: 1px solid #666;
            width: 100%;
        }
        div.footer {
            border-top: 1px solid #666;
        }
        div.body {
            margin-top: 170px;
        }
        div.meta {
            font-size: 90%;
            text-align: center;
        }
        h1, h2, h3 {
            font-weight: normal;
        }
        h1 {
            font-size: 12pt;
        }
        h2 {
            font-size: 10pt;
        }
        pre {
            font-family: Menlo, Monaco, Consolas, Courier New, monospace;
            margin: 0;
            padding: 0;
            font-size: 14px;
            tab-size: 2;
        }

        div.path { font-size: 110%; }
        div.path a:link, div.path a:visited { color: #000; }
        table.coverage { border-collapse: collapse; margin:0; padding: 0 }

        table.coverage td {
            margin: 0;
            padding: 0;
            color: #111;
            vertical-align: top;
        }
        table.coverage td.line-count {
            width: 50px;
            text-align: right;
            padding-right: 5px;
        }
        table.coverage td.line-coverage {
            color: #777 !important;
            text-align: right;
            border-left: 1px solid #666;
            border-right: 1px solid #666;
        }

        table.coverage td.text {
        }

        table.coverage td span.cline-any {
            display: inline-block;
            padding: 0 5px;
            width: 40px;
        }
        table.coverage td span.cline-neutral {
            background: #eee;
        }
        table.coverage td span.cline-yes {
            background: #b5d592;
            color: #999;
        }
        table.coverage td span.cline-no {
            background: #fc8c84;
        }

        .cstat-yes { color: #111; }
        .cstat-no { background: #fc8c84; color: #111; }
        .fstat-no { background: #ffc520; color: #111 !important; }
        .cbranch-no { background:  yellow !important; color: #111; }

        .cstat-skip { background: #ddd; color: #111; }
        .fstat-skip { background: #ddd; color: #111 !important; }
        .cbranch-skip { background: #ddd !important; color: #111; }

        .missing-if-branch {
            display: inline-block;
            margin-right: 10px;
            position: relative;
            padding: 0 4px;
            background: black;
            color: yellow;
        }

        .skip-if-branch {
            display: none;
            margin-right: 10px;
            position: relative;
            padding: 0 4px;
            background: #ccc;
            color: white;
        }

        .missing-if-branch .typ, .skip-if-branch .typ {
            color: inherit !important;
        }

        .entity, .metric { font-weight: bold; }
        .metric { display: inline-block; border: 1px solid #333; padding: 0.3em; background: white; }
        .metric small { font-size: 80%; font-weight: normal; color: #666; }

        div.coverage-summary table { border-collapse: collapse; margin: 3em; font-size: 110%; }
        div.coverage-summary td, div.coverage-summary table  th { margin: 0; padding: 0.25em 1em; border-top: 1px solid #666; border-bottom: 1px solid #666; }
        div.coverage-summary th { text-align: left; border: 1px solid #666; background: #eee; font-weight: normal; }
        div.coverage-summary th.file { border-right: none !important; }
        div.coverage-summary th.pic { border-left: none !important; text-align: right; }
        div.coverage-summary th.pct { border-right: none !important; }
        div.coverage-summary th.abs { border-left: none !important; text-align: right; }
        div.coverage-summary td.pct { text-align: right; border-left: 1px solid #666; }
        div.coverage-summary td.abs { text-align: right; font-size: 90%; color: #444; border-right: 1px solid #666; }
        div.coverage-summary td.file { text-align: right; border-left: 1px solid #666; white-space: nowrap;  }
        div.coverage-summary td.pic { min-width: 120px !important;  }
        div.coverage-summary a:link { color: #000; }
        div.coverage-summary a:visited { color: #333; }
        div.coverage-summary tfoot td { border-top: 1px solid #666; }

        div.coverage-summary .yui3-datatable-sort-indicator, div.coverage-summary .dummy-sort-indicator {
            height: 10px;
            width: 7px;
            display: inline-block;
            margin-left: 0.5em;
        }
        div.coverage-summary .yui3-datatable-sort-indicator {
            background: no-repeat scroll 0 0 transparent;
        }
        div.coverage-summary .yui3-datatable-sorted .yui3-datatable-sort-indicator {
            background-position: 0 -20px;
        }
        div.coverage-summary .yui3-datatable-sorted-desc .yui3-datatable-sort-indicator {
            background-position: 0 -10px;
        }

        .high { background: #b5d592 !important; }
        .medium { background: #ffe87c !important; }
        .low { background: #fc8c84 !important; }

        span.cover-fill, span.cover-empty {
            display:inline-block;
            border:1px solid #444;
            background: white;
            height: 12px;
        }
        span.cover-fill {
            background: #ccc;
            border-right: 1px solid #444;
        }
        span.cover-empty {
            background: white;
            border-left: none;
        }
        span.cover-full {
            border-right: none !important;
        }
        pre.prettyprint {
            border: none !important;
            padding: 0 !important;
            margin: 0 !important;
        }
        .com { color: #999 !important; }
        .ignore-none { color: #999; font-weight: normal; }

    </style>
</head>
<body>
<div class="header low">
    <h1 style="font-weight: bold;">
        <a href="https://github.com/npmtest/node-npmtest-firebase">npmtest-firebase (v0.0.3)</a>
    </h1>
    <h1>Code coverage report for <span class="entity">node-npmtest-firebase/node_modules/firebase/firebase-messaging.js</span></h1>
    <h2>
        
        Statements: <span class="metric">5.07% <small>(19 / 375)</small></span> &nbsp;&nbsp;&nbsp;&nbsp;
        
        
        Branches: <span class="metric">0% <small>(0 / 228)</small></span> &nbsp;&nbsp;&nbsp;&nbsp;
        
        
        Functions: <span class="metric">2.4% <small>(3 / 125)</small></span> &nbsp;&nbsp;&nbsp;&nbsp;
        
        
        Lines: <span class="metric">17.24% <small>(5 / 29)</small></span> &nbsp;&nbsp;&nbsp;&nbsp;
        
        Ignored: <span class="metric"><span class="ignore-none">none</span></span> &nbsp;&nbsp;&nbsp;&nbsp;
    </h2>
    <div class="path"><a href="../../../index.html">All files</a> &#187; <a href="index.html">node-npmtest-firebase/node_modules/firebase/</a> &#187; firebase-messaging.js</div>
</div>
<div class="body">
<pre><table class="coverage">
<tr><td class="line-count">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39</td><td class="line-coverage"><span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">2</span>
<span class="cline-any cline-yes">4</span>
<span class="cline-any cline-yes">2</span>
<span class="cline-any cline-yes">2</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">2</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span></td><td class="text"><pre class="prettyprint lang-js">/*! @license Firebase v3.8.0
Build: rev-69367dd
Terms: https://firebase.google.com/terms/ */
&nbsp;
(function(){var f=<span class="fstat-no" title="function not covered" >function(a,b){<span class="fstat-no" title="function not covered" ></span>function c(){</span>}<span class="cstat-no" title="statement not covered" >c.prototype=b.prototype;<span class="cstat-no" title="statement not covered" >a</span>.prototype=new c;<span class="cstat-no" title="statement not covered" >f</span>or(var d in b)<span class="cstat-no" title="statement not covered" >if(Object.defineProperties){<span class="cstat-no" title="statement not covered" >var e=Object.getOwnPropertyDescriptor(b,d);<span class="cstat-no" title="statement not covered" >e</span>&amp;&amp;Object.defineProperty(a,d,e)}</span>else <span class="cstat-no" title="statement not covered" >a[d]=b[d]}</span></span></span>,g=this,h=<span class="fstat-no" title="function not covered" >function(a){<span class="cstat-no" title="statement not covered" ></span>var b=typeof a;<span class="cstat-no" title="statement not covered" >i</span>f("object"==b)<span class="cstat-no" title="statement not covered" >if(a){<span class="cstat-no" title="statement not covered" >if(a instanceof Array)<span class="cstat-no" title="statement not covered" >return"array";<span class="cstat-no" title="statement not covered" >i</span></span>f(a instanceof Object)<span class="cstat-no" title="statement not covered" >return b;<span class="cstat-no" title="statement not covered" >v</span></span>ar c=Object.prototype.toString.call(a);<span class="cstat-no" title="statement not covered" >i</span>f("[object Window]"==c)<span class="cstat-no" title="statement not covered" >return"object";<span class="cstat-no" title="statement not covered" >i</span></span>f("[object Array]"==c||"number"==typeof a.length&amp;&amp;"undefined"!=typeof a.splice&amp;&amp;"undefined"!=</span></span></span>
typeof a.propertyIsEnumerable&amp;&amp;!a.propertyIsEnumerable("splice"))<span class="cstat-no" title="statement not covered" >return"array";<span class="cstat-no" title="statement not covered" >i</span>f("[object Function]"==c||"undefined"!=typeof a.call&amp;&amp;"undefined"!=typeof a.propertyIsEnumerable&amp;&amp;!a.propertyIsEnumerable("call"))<span class="cstat-no" title="statement not covered" >return"function"}</span></span>else <span class="cstat-no" title="statement not covered" >return"null";e</span>lse <span class="cstat-no" title="statement not covered" >if("function"==b&amp;&amp;"undefined"==typeof a.call)<span class="cstat-no" title="statement not covered" >return"object";<span class="cstat-no" title="statement not covered" >r</span></span>eturn b}</span>,k=function(a,b){function c(){}c.prototype=b.prototype;a.B=b.prototype;a.prototype=new c;a.u=<span class="fstat-no" title="function not covered" >function(a,c,n){<span class="cstat-no" title="statement not covered" ></span>for(var d=Array(arguments.length-2),e=2;e&lt;arguments.length;e++)<span class="cstat-no" title="statement not covered" >d[e-2]=arguments[e];</span></span>
<span class="cstat-no" title="statement not covered" >return b.prototype[c].apply(a,d)}</span>};var m=<span class="fstat-no" title="function not covered" >function(a){<span class="cstat-no" title="statement not covered" ></span>if(Error.captureStackTrace)<span class="cstat-no" title="statement not covered" >Error.captureStackTrace(this,m);e</span>lse{<span class="cstat-no" title="statement not covered" >var b=Error().stack;<span class="cstat-no" title="statement not covered" >b</span>&amp;&amp;(this.stack=b)}<span class="cstat-no" title="statement not covered" ></span>a</span>&amp;&amp;(this.message=String(a))}</span>;k(m,Error);var p=<span class="fstat-no" title="function not covered" >function(a,b){<span class="cstat-no" title="statement not covered" ></span>for(var c=a.split("%s"),d="",e=Array.prototype.slice.call(arguments,1);e.length&amp;&amp;1&lt;c.length;)<span class="cstat-no" title="statement not covered" >d+=c.shift()+e.shift();<span class="cstat-no" title="statement not covered" >r</span></span>eturn d+c.join("%s")}</span>;var q=<span class="fstat-no" title="function not covered" >function(a,b){<span class="cstat-no" title="statement not covered" ></span>b.unshift(a);<span class="cstat-no" title="statement not covered" >m</span>.call(this,p.apply(null,b));<span class="cstat-no" title="statement not covered" >b</span>.shift()}</span>;k(q,m);var r=<span class="fstat-no" title="function not covered" >function(a,b,c){<span class="cstat-no" title="statement not covered" ></span>if(!a){<span class="cstat-no" title="statement not covered" >var d="Assertion failed";<span class="cstat-no" title="statement not covered" >i</span>f(b)<span class="cstat-no" title="statement not covered" >var d=d+(": "+b),e=Array.prototype.slice.call(arguments,2);<span class="cstat-no" title="statement not covered" >t</span></span>hrow new q(""+d,e||[]);}</span>}</span>;var u=null;var v=<span class="fstat-no" title="function not covered" >function(a){<span class="cstat-no" title="statement not covered" ></span>a=new Uint8Array(a);<span class="cstat-no" title="statement not covered" >v</span>ar b=h(a);<span class="cstat-no" title="statement not covered" >r</span>("array"==b||"object"==b&amp;&amp;"number"==typeof a.length,"encodeByteArray takes an array as a parameter");<span class="cstat-no" title="statement not covered" >i</span>f(!u)<span class="cstat-no" title="statement not covered" >for(u={},b=0;65&gt;b;b++)<span class="cstat-no" title="statement not covered" >u[b]="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(b);<span class="cstat-no" title="statement not covered" >f</span></span></span>or(var b=u,c=[],d=0;d&lt;a.length;d+=3){<span class="cstat-no" title="statement not covered" >var e=a[d],n=d+1&lt;a.length,l=n?a[d+1]:0,z=d+2&lt;a.length,t=z?a[d+2]:0,M=e&gt;&gt;2,e=(e&amp;3)&lt;&lt;4|l&gt;&gt;4,l=(l&amp;15)&lt;&lt;2|t&gt;&gt;6,t=t&amp;63;<span class="cstat-no" title="statement not covered" >z</span>||(t=64,n||(l=64));<span class="cstat-no" title="statement not covered" >c</span>.push(b[M],b[e],b[l],b[t])}<span class="cstat-no" title="statement not covered" ></span>r</span>eturn c.join("").replace(/\+/g,"-").replace(/\//g,</span>
"_").replace(/=+$/,"")};var w={},x=(w["only-available-in-window"]="This method is available in a Window context.",w["only-available-in-sw"]="This method is available in a service worker context.",w["should-be-overriden"]="This method should be overriden by extended classes.",w["bad-sender-id"]="Please ensure that 'messagingSenderId' is set correctly in the options passed into firebase.initializeApp().",w["permission-default"]="The required permissions were not granted and dismissed instead.",w["permission-blocked"]="The required permissions were not granted and blocked instead.",
w["unsupported-browser"]="This browser doesn't support the API's required to use the firebase SDK.",w["notifications-blocked"]="Notifications have been blocked.",w["failed-serviceworker-registration"]="We are unable to register the default service worker. {$browserErrorMessage}",w["sw-registration-expected"]="A service worker registration was the expected input.",w["get-subscription-failed"]="There was an error when trying to get any existing Push Subscriptions.",w["invalid-saved-token"]="Unable to access details of the saved token.",
w["sw-reg-redundant"]="The service worker being used for push was made redundant.",w["token-subscribe-failed"]="A problem occured while subscribing the user to FCM: {$message}",w["token-subscribe-no-token"]="FCM returned no token when subscribing the user to push.",w["token-subscribe-no-push-set"]="FCM returned an invalid response when getting an FCM token.",w["use-sw-before-get-token"]="You must call useServiceWorker() before calling getToken() to ensure your service worker is used.",w["invalid-delete-token"]=
"You must pass a valid token into deleteToken(), i.e. the token from getToken().",w["delete-token-not-found"]="The deletion attempt for token could not be performed as the token was not found.",w["delete-scope-not-found"]="The deletion attempt for service worker scope could not be performed as the scope was not found.",w["bg-handler-function-expected"]="The input to setBackgroundMessageHandler() must be a function.",w["no-window-client-to-msg"]="An attempt was made to message a non-existant window client.",
w["unable-to-resubscribe"]="There was an error while re-subscribing the FCM token for push messaging. Will have to resubscribe the user on next visit. {$message}",w["no-fcm-token-for-resubscribe"]="Could not find an FCM token and as a result, unable to resubscribe. Will have to resubscribe the user on next visit.",w["failed-to-delete-token"]="Unable to delete the currently saved token.",w["no-sw-in-reg"]="Even though the service worker registration was successful, there was a problem accessing the service worker itself.",
w["incorrect-gcm-sender-id"]="Please change your web app manifest's 'gcm_sender_id' value to '103953800507' to use Firebase messaging.",w["bad-scope"]="The service worker scope must be a string with at least one character.",w["bad-vapid-key"]="The public VAPID key must be a string with at least one character.",w["failed-delete-vapid-key"]="The VAPID key could not be deleted.",w);var y={userVisibleOnly:!0,applicationServerKey:new Uint8Array([4,51,148,247,223,161,235,177,220,3,162,94,21,113,219,72,211,46,237,237,178,52,219,183,71,58,12,143,196,204,225,111,60,140,132,223,171,182,102,62,242,12,212,139,254,227,249,118,47,20,28,99,8,106,111,45,177,26,149,176,206,55,192,156,110])};var A=new firebase.INTERNAL.ErrorFactory("messaging","Messaging",x),B=<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>this.a=null}</span>,C=<span class="fstat-no" title="function not covered" >function(a){<span class="cstat-no" title="statement not covered" ></span>if(a.a)<span class="cstat-no" title="statement not covered" >return a.a;<span class="cstat-no" title="statement not covered" >a</span></span>.a=new Promise(<span class="fstat-no" title="function not covered" >function(a,c){<span class="cstat-no" title="statement not covered" ></span>var b=g.indexedDB.open("fcm_token_details_db",1);<span class="cstat-no" title="statement not covered" >b</span>.onerror=<span class="fstat-no" title="function not covered" >function(a){<span class="cstat-no" title="statement not covered" ></span>c(a.target.error)}</span>;<span class="cstat-no" title="statement not covered" >b</span>.onsuccess=<span class="fstat-no" title="function not covered" >function(b){<span class="cstat-no" title="statement not covered" ></span>a(b.target.result)}</span>;<span class="cstat-no" title="statement not covered" >b</span>.onupgradeneeded=<span class="fstat-no" title="function not covered" >function(a){<span class="cstat-no" title="statement not covered" ></span>a=a.target.result.createObjectStore("fcm_token_object_Store",{keyPath:"swScope"});<span class="cstat-no" title="statement not covered" >a</span>.createIndex("fcmSenderId","fcmSenderId",{unique:!1});<span class="cstat-no" title="statement not covered" >a</span>.createIndex("fcmToken","fcmToken",{unique:!0})}</span>}</span>);</span>
<span class="cstat-no" title="statement not covered" >return a.a}</span>,D=<span class="fstat-no" title="function not covered" >function(a){<span class="cstat-no" title="statement not covered" ></span>a.a?a.a.then(<span class="fstat-no" title="function not covered" >function(b){<span class="cstat-no" title="statement not covered" ></span>b.close();<span class="cstat-no" title="statement not covered" >a</span>.a=null}</span>):Promise.resolve()}</span>,E=<span class="fstat-no" title="function not covered" >function(a,b){<span class="cstat-no" title="statement not covered" ></span>return C(a).then(<span class="fstat-no" title="function not covered" >function(a){<span class="cstat-no" title="statement not covered" ></span>return new Promise(<span class="fstat-no" title="function not covered" >function(c,e){<span class="cstat-no" title="statement not covered" ></span>var d=a.transaction(["fcm_token_object_Store"]).objectStore("fcm_token_object_Store").index("fcmToken").get(b);<span class="cstat-no" title="statement not covered" >d</span>.onerror=<span class="fstat-no" title="function not covered" >function(a){<span class="cstat-no" title="statement not covered" ></span>e(a.target.error)}</span>;<span class="cstat-no" title="statement not covered" >d</span>.onsuccess=<span class="fstat-no" title="function not covered" >function(a){<span class="cstat-no" title="statement not covered" ></span>c(a.target.result)}</span>}</span>)}</span>)}</span>,F=<span class="fstat-no" title="function not covered" >function(a,b){<span class="cstat-no" title="statement not covered" ></span>return C(a).then(<span class="fstat-no" title="function not covered" >function(a){<span class="cstat-no" title="statement not covered" ></span>return new Promise(<span class="fstat-no" title="function not covered" >function(c,e){<span class="cstat-no" title="statement not covered" ></span>var d=[],l=a.transaction(["fcm_token_object_Store"]).objectStore("fcm_token_object_Store").openCursor();</span></span></span>
<span class="cstat-no" title="statement not covered" >l.onerror=<span class="fstat-no" title="function not covered" >function(a){<span class="cstat-no" title="statement not covered" ></span>e(a.target.error)}</span>;<span class="cstat-no" title="statement not covered" >l</span>.onsuccess=<span class="fstat-no" title="function not covered" >function(a){<span class="cstat-no" title="statement not covered" ></span>(a=a.target.result)?(a.value.fcmSenderId===b&amp;&amp;d.push(a.value),a.continue()):c(d)}</span>}</span>)})},G=<span class="fstat-no" title="function not covered" >function(a,b,c){<span class="cstat-no" title="statement not covered" ></span>var d=v(b.getKey("p256dh")),e=v(b.getKey("auth"));<span class="cstat-no" title="statement not covered" >a</span>="authorized_entity="+a+"&amp;"+("endpoint="+b.endpoint+"&amp;")+("encryption_key="+d+"&amp;")+("encryption_auth="+e);<span class="cstat-no" title="statement not covered" >c</span>&amp;&amp;(a+="&amp;pushSet="+c);<span class="cstat-no" title="statement not covered" >c</span>=new Headers;<span class="cstat-no" title="statement not covered" >c</span>.append("Content-Type","application/x-www-form-urlencoded");<span class="cstat-no" title="statement not covered" >r</span>eturn fetch("https://fcm.googleapis.com/fcm/connect/subscribe",{method:"POST",</span>
headers:c,body:a}).then(<span class="fstat-no" title="function not covered" >function(a){<span class="cstat-no" title="statement not covered" ></span>return a.json()}</span>).then(<span class="fstat-no" title="function not covered" >function(a){<span class="cstat-no" title="statement not covered" ></span>if(a.error)<span class="cstat-no" title="statement not covered" >throw A.create("token-subscribe-failed",{message:a.error.message});<span class="cstat-no" title="statement not covered" >i</span></span>f(!a.token)<span class="cstat-no" title="statement not covered" >throw A.create("token-subscribe-no-token");<span class="cstat-no" title="statement not covered" >i</span></span>f(!a.pushSet)<span class="cstat-no" title="statement not covered" >throw A.create("token-subscribe-no-push-set");<span class="cstat-no" title="statement not covered" >r</span></span>eturn{token:a.token,pushSet:a.pushSet}}</span>)},H=<span class="fstat-no" title="function not covered" >function(a,b,c,d,e,n){<span class="cstat-no" title="statement not covered" ></span>var l={swScope:c.scope,endpoint:d.endpoint,auth:v(d.getKey("auth")),p256dh:v(d.getKey("p256dh")),fcmToken:e,fcmPushSet:n,fcmSenderId:b};<span class="cstat-no" title="statement not covered" >r</span>eturn C(a).then(<span class="fstat-no" title="function not covered" >function(a){<span class="cstat-no" title="statement not covered" ></span>return new Promise(<span class="fstat-no" title="function not covered" >function(b,</span></span></span>
c){<span class="cstat-no" title="statement not covered" >var d=a.transaction(["fcm_token_object_Store"],"readwrite").objectStore("fcm_token_object_Store").put(l);<span class="cstat-no" title="statement not covered" >d</span>.onerror=<span class="fstat-no" title="function not covered" >function(a){<span class="cstat-no" title="statement not covered" ></span>c(a.target.error)}</span>;<span class="cstat-no" title="statement not covered" >d</span>.onsuccess=<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>b()}</span>}</span>)})};
<span class="cstat-no" title="statement not covered" >B.prototype.i=<span class="fstat-no" title="function not covered" >function(a,b){<span class="cstat-no" title="statement not covered" ></span>return b instanceof ServiceWorkerRegistration?"string"!==typeof a||0===a.length?Promise.reject(A.create("bad-sender-id")):F(this,a).then(<span class="fstat-no" title="function not covered" >function(c){<span class="cstat-no" title="statement not covered" ></span>if(0!==c.length){<span class="cstat-no" title="statement not covered" >var d=c.findIndex(<span class="fstat-no" title="function not covered" >function(c){<span class="cstat-no" title="statement not covered" ></span>return b.scope===c.swScope&amp;&amp;a===c.fcmSenderId}</span>);<span class="cstat-no" title="statement not covered" >i</span>f(-1!==d)<span class="cstat-no" title="statement not covered" >return c[d]}</span></span>}</span>).then(<span class="fstat-no" title="function not covered" >function(a){<span class="cstat-no" title="statement not covered" ></span>if(a)<span class="cstat-no" title="statement not covered" >return b.pushManager.getSubscription().catch(<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>throw A.create("get-subscription-failed");}</span>).then(<span class="fstat-no" title="function not covered" >function(b){<span class="cstat-no" title="statement not covered" ></span>var c;<span class="cstat-no" title="statement not covered" >i</span>f(c=b)<span class="cstat-no" title="statement not covered" >c=b.endpoint===a.endpoint&amp;&amp;v(b.getKey("auth"))===a.auth&amp;&amp;</span></span></span></span></span></span>
v(b.getKey("p256dh"))===a.p256dh;<span class="cstat-no" title="statement not covered" >if(c)<span class="cstat-no" title="statement not covered" >return a.fcmToken}</span></span>)}):Promise.reject(A.create("sw-registration-expected"))};<span class="cstat-no" title="statement not covered" >B.prototype.getSavedToken=B.prototype.i;</span>
<span class="cstat-no" title="statement not covered" >B.prototype.h=<span class="fstat-no" title="function not covered" >function(a,b){<span class="cstat-no" title="statement not covered" ></span>var c=this;<span class="cstat-no" title="statement not covered" >r</span>eturn"string"!==typeof a||0===a.length?Promise.reject(A.create("bad-sender-id")):b instanceof ServiceWorkerRegistration?b.pushManager.getSubscription().then(<span class="fstat-no" title="function not covered" >function(a){<span class="cstat-no" title="statement not covered" ></span>return a?a:b.pushManager.subscribe(y)}</span>).then(<span class="fstat-no" title="function not covered" >function(d){<span class="cstat-no" title="statement not covered" ></span>return G(a,d).then(<span class="fstat-no" title="function not covered" >function(e){<span class="cstat-no" title="statement not covered" ></span>return H(c,a,b,d,e.token,e.pushSet).then(<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>return e.token}</span>)}</span>)}</span>):Promise.reject(A.create("sw-registration-expected"))}</span>;<span class="cstat-no" title="statement not covered" >B</span>.prototype.createToken=B.prototype.h;</span>
<span class="cstat-no" title="statement not covered" >B.prototype.deleteToken=<span class="fstat-no" title="function not covered" >function(a){<span class="cstat-no" title="statement not covered" ></span>var b=this;<span class="cstat-no" title="statement not covered" >r</span>eturn"string"!==typeof a||0===a.length?Promise.reject(A.create("invalid-delete-token")):E(this,a).then(<span class="fstat-no" title="function not covered" >function(a){<span class="cstat-no" title="statement not covered" ></span>if(!a)<span class="cstat-no" title="statement not covered" >throw A.create("delete-token-not-found");<span class="cstat-no" title="statement not covered" >r</span></span>eturn C(b).then(<span class="fstat-no" title="function not covered" >function(b){<span class="cstat-no" title="statement not covered" ></span>return new Promise(<span class="fstat-no" title="function not covered" >function(c,d){<span class="cstat-no" title="statement not covered" ></span>var e=b.transaction(["fcm_token_object_Store"],"readwrite").objectStore("fcm_token_object_Store").delete(a.swScope);<span class="cstat-no" title="statement not covered" >e</span>.onerror=<span class="fstat-no" title="function not covered" >function(a){<span class="cstat-no" title="statement not covered" ></span>d(a.target.error)}</span>;<span class="cstat-no" title="statement not covered" >e</span>.onsuccess=<span class="fstat-no" title="function not covered" >function(b){<span class="cstat-no" title="statement not covered" ></span>0===b.target.result?d(A.create("failed-to-delete-token")):</span></span></span></span></span></span>
c(a)}})})})};<span class="cstat-no" title="statement not covered" >var I=<span class="fstat-no" title="function not covered" >function(a){<span class="cstat-no" title="statement not covered" ></span>var b=this;<span class="cstat-no" title="statement not covered" >t</span>his.a=new firebase.INTERNAL.ErrorFactory("messaging","Messaging",x);<span class="cstat-no" title="statement not covered" >i</span>f(!a.options.messagingSenderId||"string"!==typeof a.options.messagingSenderId)<span class="cstat-no" title="statement not covered" >throw this.a.create("bad-sender-id");<span class="cstat-no" title="statement not covered" >t</span></span>his.l=a.options.messagingSenderId;<span class="cstat-no" title="statement not covered" >t</span>his.c=new B;<span class="cstat-no" title="statement not covered" >t</span>his.app=a;<span class="cstat-no" title="statement not covered" >t</span>his.INTERNAL={};<span class="cstat-no" title="statement not covered" >t</span>his.INTERNAL.delete=<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>return b.delete}</span>}</span>;</span>
<span class="cstat-no" title="statement not covered" >I.prototype.getToken=<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>var a=this,b=Notification.permission;<span class="cstat-no" title="statement not covered" >r</span>eturn"granted"!==b?"denied"===b?Promise.reject(this.a.create("notifications-blocked")):Promise.resolve(null):this.f().then(<span class="fstat-no" title="function not covered" >function(b){<span class="cstat-no" title="statement not covered" ></span>return a.c.i(a.l,b).then(<span class="fstat-no" title="function not covered" >function(c){<span class="cstat-no" title="statement not covered" ></span>return c?c:a.c.h(a.l,b)}</span>)}</span>)}</span>;<span class="cstat-no" title="statement not covered" >I</span>.prototype.getToken=I.prototype.getToken;<span class="cstat-no" title="statement not covered" >I</span>.prototype.deleteToken=<span class="fstat-no" title="function not covered" >function(a){<span class="cstat-no" title="statement not covered" ></span>var b=this;<span class="cstat-no" title="statement not covered" >r</span>eturn this.c.deleteToken(a).then(<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>return b.f()}</span>).then(<span class="fstat-no" title="function not covered" >function(a){<span class="cstat-no" title="statement not covered" ></span>return a?a.pushManager.getSubscription():null}</span>).then(<span class="fstat-no" title="function not covered" >function(a){<span class="cstat-no" title="statement not covered" ></span>if(a)<span class="cstat-no" title="statement not covered" >return a.unsubscribe()}</span></span>)}</span>;</span>
<span class="cstat-no" title="statement not covered" >I.prototype.deleteToken=I.prototype.deleteToken;<span class="cstat-no" title="statement not covered" >I</span>.prototype.f=<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>throw this.a.create("should-be-overriden");}</span>;<span class="cstat-no" title="statement not covered" >I</span>.prototype.requestPermission=<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>throw this.a.create("only-available-in-window");}</span>;<span class="cstat-no" title="statement not covered" >I</span>.prototype.useServiceWorker=<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>throw this.a.create("only-available-in-window");}</span>;<span class="cstat-no" title="statement not covered" >I</span>.prototype.useServiceWorker=I.prototype.useServiceWorker;<span class="cstat-no" title="statement not covered" >I</span>.prototype.onMessage=<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>throw this.a.create("only-available-in-window");}</span>;<span class="cstat-no" title="statement not covered" >I</span>.prototype.onMessage=I.prototype.onMessage;</span>
<span class="cstat-no" title="statement not covered" >I.prototype.onTokenRefresh=<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>throw this.a.create("only-available-in-window");}</span>;<span class="cstat-no" title="statement not covered" >I</span>.prototype.onTokenRefresh=I.prototype.onTokenRefresh;<span class="cstat-no" title="statement not covered" >I</span>.prototype.setBackgroundMessageHandler=<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>throw this.a.create("only-available-in-sw");}</span>;<span class="cstat-no" title="statement not covered" >I</span>.prototype.setBackgroundMessageHandler=I.prototype.setBackgroundMessageHandler;<span class="cstat-no" title="statement not covered" >I</span>.prototype.delete=<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>D(this.c)}</span>;<span class="cstat-no" title="statement not covered" >v</span>ar J=<span class="fstat-no" title="function not covered" >function(a,b){<span class="cstat-no" title="statement not covered" ></span>var c={};<span class="cstat-no" title="statement not covered" >r</span>eturn c["firebase-messaging-msg-type"]=a,c["firebase-messaging-msg-data"]=b,c}</span>;<span class="cstat-no" title="statement not covered" >v</span>ar K=self,P=<span class="fstat-no" title="function not covered" >function(a){<span class="cstat-no" title="statement not covered" ></span>I.call(this,a);<span class="cstat-no" title="statement not covered" >v</span>ar b=this;<span class="cstat-no" title="statement not covered" >t</span>his.a=new firebase.INTERNAL.ErrorFactory("messaging","Messaging",x);<span class="cstat-no" title="statement not covered" >K</span>.addEventListener("push",<span class="fstat-no" title="function not covered" >function(a){<span class="cstat-no" title="statement not covered" ></span>return L(b,a)}</span>,!1);<span class="cstat-no" title="statement not covered" >K</span>.addEventListener("pushsubscriptionchange",<span class="fstat-no" title="function not covered" >function(a){<span class="cstat-no" title="statement not covered" ></span>return N(b,a)}</span>,!1);<span class="cstat-no" title="statement not covered" >K</span>.addEventListener("notificationclick",<span class="fstat-no" title="function not covered" >function(a){<span class="cstat-no" title="statement not covered" ></span>return O(b,a)}</span>,!1);<span class="cstat-no" title="statement not covered" >t</span>his.b=null}</span>;<span class="cstat-no" title="statement not covered" >f</span>(P,I);</span>
<span class="cstat-no" title="statement not covered" >var L=<span class="fstat-no" title="function not covered" >function(a,b){<span class="cstat-no" title="statement not covered" ></span>var c;<span class="cstat-no" title="statement not covered" >t</span>ry{<span class="cstat-no" title="statement not covered" >c=b.data.json()}</span>catch(e){<span class="cstat-no" title="statement not covered" >return}<span class="cstat-no" title="statement not covered" ></span>v</span>ar d=Q().then(<span class="fstat-no" title="function not covered" >function(b){<span class="cstat-no" title="statement not covered" ></span>if(b){<span class="cstat-no" title="statement not covered" >if(c.notification||a.b)<span class="cstat-no" title="statement not covered" >return R(a,c)}</span></span>else{<span class="cstat-no" title="statement not covered" >if((b=c)&amp;&amp;"object"===typeof b.notification){<span class="cstat-no" title="statement not covered" >var d=Object.assign({},b.notification),e={};<span class="cstat-no" title="statement not covered" >d</span>.data=(e.FCM_MSG=b,e);<span class="cstat-no" title="statement not covered" >b</span>=d}</span>else <span class="cstat-no" title="statement not covered" >b=void 0;<span class="cstat-no" title="statement not covered" >i</span></span>f(b)<span class="cstat-no" title="statement not covered" >return K.registration.showNotification(b.title||"",b);<span class="cstat-no" title="statement not covered" >i</span></span>f(a.b)<span class="cstat-no" title="statement not covered" >return a.b(c)}</span></span>}</span>);<span class="cstat-no" title="statement not covered" >b</span>.waitUntil(d)}</span>,N=<span class="fstat-no" title="function not covered" >function(a,b){<span class="cstat-no" title="statement not covered" ></span>var c=a.getToken().then(<span class="fstat-no" title="function not covered" >function(b){<span class="cstat-no" title="statement not covered" ></span>if(!b)<span class="cstat-no" title="statement not covered" >throw a.a.create("no-fcm-token-for-resubscribe");<span class="cstat-no" title="statement not covered" >v</span></span>ar c=a.c;<span class="cstat-no" title="statement not covered" >r</span>eturn E(c,b).then(<span class="fstat-no" title="function not covered" >function(b){<span class="cstat-no" title="statement not covered" ></span>if(!b)<span class="cstat-no" title="statement not covered" >throw a.a.create("invalid-saved-token");</span></span></span></span></span>
<span class="cstat-no" title="statement not covered" >return K.registration.pushManager.subscribe(y).then(<span class="fstat-no" title="function not covered" >function(a){<span class="cstat-no" title="statement not covered" ></span>return G(b.w,a,b.v)}</span>).catch(<span class="fstat-no" title="function not covered" >function(d){<span class="cstat-no" title="statement not covered" ></span>return c.deleteToken(b.A).then(<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>throw a.a.create("unable-to-resubscribe",{message:d});}</span>)}</span>)}</span>)});<span class="cstat-no" title="statement not covered" >b.waitUntil(c)}</span>,O=<span class="fstat-no" title="function not covered" >function(a,b){<span class="cstat-no" title="statement not covered" ></span>if(b.notification&amp;&amp;b.notification.data&amp;&amp;b.notification.data.FCM_MSG){<span class="cstat-no" title="statement not covered" >b.stopImmediatePropagation();<span class="cstat-no" title="statement not covered" >b</span>.notification.close();<span class="cstat-no" title="statement not covered" >v</span>ar c=b.notification.data.FCM_MSG,d=c.notification.click_action;<span class="cstat-no" title="statement not covered" >i</span>f(d){<span class="cstat-no" title="statement not covered" >var e=S(d).then(<span class="fstat-no" title="function not covered" >function(a){<span class="cstat-no" title="statement not covered" ></span>return a?a:K.clients.openWindow(d)}</span>).then(<span class="fstat-no" title="function not covered" >function(b){<span class="cstat-no" title="statement not covered" ></span>if(b)<span class="cstat-no" title="statement not covered" >return delete c.notification,</span></span></span></span></span>
T(a,b,J("notification-clicked",c))});<span class="cstat-no" title="statement not covered" >b.waitUntil(e)}</span>}};<span class="cstat-no" title="statement not covered" >P.prototype.setBackgroundMessageHandler=<span class="fstat-no" title="function not covered" >function(a){<span class="cstat-no" title="statement not covered" ></span>if(a&amp;&amp;"function"!==typeof a)<span class="cstat-no" title="statement not covered" >throw this.a.create("bg-handler-function-expected");<span class="cstat-no" title="statement not covered" >t</span></span>his.b=a}</span>;<span class="cstat-no" title="statement not covered" >P</span>.prototype.setBackgroundMessageHandler=P.prototype.setBackgroundMessageHandler;</span>
<span class="cstat-no" title="statement not covered" >var S=<span class="fstat-no" title="function not covered" >function(a){<span class="cstat-no" title="statement not covered" ></span>var b=(new URL(a)).href;<span class="cstat-no" title="statement not covered" >r</span>eturn K.clients.matchAll({type:"window",includeUncontrolled:!0}).then(<span class="fstat-no" title="function not covered" >function(a){<span class="cstat-no" title="statement not covered" ></span>for(var c=null,e=0;e&lt;a.length;e++)<span class="cstat-no" title="statement not covered" >if((new URL(a[e].url)).href===b){<span class="cstat-no" title="statement not covered" >c=a[e];<span class="cstat-no" title="statement not covered" >b</span>reak}<span class="cstat-no" title="statement not covered" ></span>i</span></span>f(c)<span class="cstat-no" title="statement not covered" >return c.focus(),c}</span></span>)}</span>,T=<span class="fstat-no" title="function not covered" >function(a,b,c){<span class="cstat-no" title="statement not covered" ></span>return new Promise(<span class="fstat-no" title="function not covered" >function(d,e){<span class="cstat-no" title="statement not covered" ></span>if(!b)<span class="cstat-no" title="statement not covered" >return e(a.a.create("no-window-client-to-msg"));<span class="cstat-no" title="statement not covered" >b</span></span>.postMessage(c);<span class="cstat-no" title="statement not covered" >d</span>()}</span>)}</span>,Q=<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>return K.clients.matchAll({type:"window",includeUncontrolled:!0}).then(<span class="fstat-no" title="function not covered" >function(a){<span class="cstat-no" title="statement not covered" ></span>return a.some(<span class="fstat-no" title="function not covered" >function(a){<span class="cstat-no" title="statement not covered" ></span>return"visible"===</span></span></span></span>
a.visibilityState})})},R=<span class="fstat-no" title="function not covered" >function(a,b){<span class="cstat-no" title="statement not covered" ></span>return K.clients.matchAll({type:"window",includeUncontrolled:!0}).then(<span class="fstat-no" title="function not covered" >function(c){<span class="cstat-no" title="statement not covered" ></span>var d=J("push-msg-received",b);<span class="cstat-no" title="statement not covered" >r</span>eturn Promise.all(c.map(<span class="fstat-no" title="function not covered" >function(b){<span class="cstat-no" title="statement not covered" ></span>return T(a,b,d)}</span>))}</span>)}</span>;<span class="cstat-no" title="statement not covered" >P.prototype.f=<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>return Promise.resolve(K.registration)}</span>;<span class="cstat-no" title="statement not covered" >v</span>ar V=<span class="fstat-no" title="function not covered" >function(a){<span class="cstat-no" title="statement not covered" ></span>I.call(this,a);<span class="cstat-no" title="statement not covered" >v</span>ar b=this;<span class="cstat-no" title="statement not covered" >t</span>his.j=null;<span class="cstat-no" title="statement not covered" >t</span>his.m=firebase.INTERNAL.createSubscribe(<span class="fstat-no" title="function not covered" >function(a){<span class="cstat-no" title="statement not covered" ></span>b.j=a}</span>);<span class="cstat-no" title="statement not covered" >t</span>his.s=null;<span class="cstat-no" title="statement not covered" >t</span>his.o=firebase.INTERNAL.createSubscribe(<span class="fstat-no" title="function not covered" >function(a){<span class="cstat-no" title="statement not covered" ></span>b.s=a}</span>);<span class="cstat-no" title="statement not covered" >U</span>(this)}</span>;<span class="cstat-no" title="statement not covered" >f</span>(V,I);</span>
<span class="cstat-no" title="statement not covered" >V.prototype.getToken=<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>var a=this;<span class="cstat-no" title="statement not covered" >r</span>eturn"serviceWorker"in navigator&amp;&amp;"PushManager"in window&amp;&amp;"Notification"in window&amp;&amp;ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&amp;&amp;PushSubscription.prototype.hasOwnProperty("getKey")?W(this).then(<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>return I.prototype.getToken.call(a)}</span>):Promise.reject(this.a.create("unsupported-browser"))}</span>;<span class="cstat-no" title="statement not covered" >V</span>.prototype.getToken=V.prototype.getToken;</span>
<span class="cstat-no" title="statement not covered" >var W=<span class="fstat-no" title="function not covered" >function(a){<span class="cstat-no" title="statement not covered" ></span>if(a.g)<span class="cstat-no" title="statement not covered" >return a.g;<span class="cstat-no" title="statement not covered" >v</span></span>ar b=document.querySelector('link[rel="manifest"]');<span class="cstat-no" title="statement not covered" >b</span>?a.g=fetch(b.href).then(<span class="fstat-no" title="function not covered" >function(a){<span class="cstat-no" title="statement not covered" ></span>return a.json()}</span>).catch(<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>return Promise.resolve()}</span>).then(<span class="fstat-no" title="function not covered" >function(b){<span class="cstat-no" title="statement not covered" ></span>if(b&amp;&amp;b.gcm_sender_id&amp;&amp;"103953800507"!==b.gcm_sender_id)<span class="cstat-no" title="statement not covered" >throw a.a.create("incorrect-gcm-sender-id");}</span></span>):a.g=Promise.resolve();<span class="cstat-no" title="statement not covered" >r</span>eturn a.g}</span>;</span>
<span class="cstat-no" title="statement not covered" >V.prototype.requestPermission=<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>var a=this;<span class="cstat-no" title="statement not covered" >r</span>eturn"granted"===Notification.permission?Promise.resolve():new Promise(<span class="fstat-no" title="function not covered" >function(b,c){<span class="cstat-no" title="statement not covered" ></span>var d=<span class="fstat-no" title="function not covered" >function(d){<span class="cstat-no" title="statement not covered" ></span>return"granted"===d?b():"denied"===d?c(a.a.create("permission-blocked")):c(a.a.create("permission-default"))}</span>,e=Notification.requestPermission(<span class="fstat-no" title="function not covered" >function(a){<span class="cstat-no" title="statement not covered" ></span>e||d(a)}</span>);<span class="cstat-no" title="statement not covered" >e</span>&amp;&amp;e.then(d)}</span>)}</span>;<span class="cstat-no" title="statement not covered" >V</span>.prototype.requestPermission=V.prototype.requestPermission;</span>
<span class="cstat-no" title="statement not covered" >V.prototype.useServiceWorker=<span class="fstat-no" title="function not covered" >function(a){<span class="cstat-no" title="statement not covered" ></span>if(!(a instanceof ServiceWorkerRegistration))<span class="cstat-no" title="statement not covered" >throw this.a.create("sw-registration-expected");<span class="cstat-no" title="statement not covered" >i</span></span>f("undefined"!==typeof this.b)<span class="cstat-no" title="statement not covered" >throw this.a.create("use-sw-before-get-token");<span class="cstat-no" title="statement not covered" >t</span></span>his.b=a}</span>;<span class="cstat-no" title="statement not covered" >V</span>.prototype.useServiceWorker=V.prototype.useServiceWorker;<span class="cstat-no" title="statement not covered" >V</span>.prototype.onMessage=<span class="fstat-no" title="function not covered" >function(a,b,c){<span class="cstat-no" title="statement not covered" ></span>return this.m(a,b,c)}</span>;<span class="cstat-no" title="statement not covered" >V</span>.prototype.onMessage=V.prototype.onMessage;<span class="cstat-no" title="statement not covered" >V</span>.prototype.onTokenRefresh=<span class="fstat-no" title="function not covered" >function(a,b,c){<span class="cstat-no" title="statement not covered" ></span>return this.o(a,b,c)}</span>;<span class="cstat-no" title="statement not covered" >V</span>.prototype.onTokenRefresh=V.prototype.onTokenRefresh;</span>
<span class="cstat-no" title="statement not covered" >var X=<span class="fstat-no" title="function not covered" >function(a,b){<span class="cstat-no" title="statement not covered" ></span>var c=b.installing||b.waiting||b.active;<span class="cstat-no" title="statement not covered" >r</span>eturn new Promise(<span class="fstat-no" title="function not covered" >function(d,e){<span class="cstat-no" title="statement not covered" ></span>if(c)<span class="cstat-no" title="statement not covered" >if("activated"===c.state)<span class="cstat-no" title="statement not covered" >d(b);e</span>lse <span class="cstat-no" title="statement not covered" >if("redundant"===c.state)<span class="cstat-no" title="statement not covered" >e(a.a.create("sw-reg-redundant"));e</span>lse{<span class="cstat-no" title="statement not covered" >var n=<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>if("activated"===c.state)<span class="cstat-no" title="statement not covered" >d(b);e</span>lse <span class="cstat-no" title="statement not covered" >if("redundant"===c.state)<span class="cstat-no" title="statement not covered" >e(a.a.create("sw-reg-redundant"));e</span>lse <span class="cstat-no" title="statement not covered" >return;<span class="cstat-no" title="statement not covered" >c</span></span></span>.removeEventListener("statechange",n)}</span>;<span class="cstat-no" title="statement not covered" >c</span>.addEventListener("statechange",n)}</span>e</span></span>lse <span class="cstat-no" title="statement not covered" >e(a.a.create("no-sw-in-reg"))}</span></span>)}</span>;</span>
<span class="cstat-no" title="statement not covered" >V.prototype.f=<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>var a=this;<span class="cstat-no" title="statement not covered" >i</span>f(this.b)<span class="cstat-no" title="statement not covered" >return X(this,this.b);<span class="cstat-no" title="statement not covered" >t</span></span>his.b=null;<span class="cstat-no" title="statement not covered" >r</span>eturn navigator.serviceWorker.register("/firebase-messaging-sw.js",{scope:"/firebase-cloud-messaging-push-scope"}).catch(<span class="fstat-no" title="function not covered" >function(b){<span class="cstat-no" title="statement not covered" ></span>throw a.a.create("failed-serviceworker-registration",{browserErrorMessage:b.message});}</span>).then(<span class="fstat-no" title="function not covered" >function(b){<span class="cstat-no" title="statement not covered" ></span>return X(a,b).then(<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>a.b=b;<span class="cstat-no" title="statement not covered" >b</span>.update();<span class="cstat-no" title="statement not covered" >r</span>eturn b}</span>)}</span>)}</span>;</span>
<span class="cstat-no" title="statement not covered" >var U=<span class="fstat-no" title="function not covered" >function(a){<span class="cstat-no" title="statement not covered" ></span>"serviceWorker"in navigator&amp;&amp;navigator.serviceWorker.addEventListener("message",<span class="fstat-no" title="function not covered" >function(b){<span class="cstat-no" title="statement not covered" ></span>if(b.data&amp;&amp;b.data["firebase-messaging-msg-type"])<span class="cstat-no" title="statement not covered" >switch(b=b.data,b["firebase-messaging-msg-type"]){case "push-msg-received":case "notification-clicked":<span class="cstat-no" title="statement not covered" >a.j.next(b["firebase-messaging-msg-data"])}</span>}</span></span>,!1)}</span>;<span class="cstat-no" title="statement not covered" >i</span>f(!(firebase&amp;&amp;firebase.INTERNAL&amp;&amp;firebase.INTERNAL.registerService))<span class="cstat-no" title="statement not covered" >throw Error("Cannot install Firebase Messaging - be sure to load firebase-app.js first.");<span class="cstat-no" title="statement not covered" >f</span></span>irebase.INTERNAL.registerService("messaging",<span class="fstat-no" title="function not covered" >function(a){<span class="cstat-no" title="statement not covered" ></span>return self&amp;&amp;"ServiceWorkerGlobalScope"in self?new P(a):new V(a)}</span>,{Messaging:V});<span class="cstat-no" title="statement not covered" >n</span>ew firebase.INTERNAL.ErrorFactory("messaging","Messaging",x);}</span>).call(this);
&nbsp;
&nbsp;</pre></td></tr>
</table></pre>
</div>
<div class="footer">
    <div class="meta">Generated by <a href="https://github.com/kaizhu256/node-utility2" target="_blank">utility2</a> at Wed Apr 19 2017 07:12:24 GMT+0000 (UTC)</div>
</div>
</body>
</html>
